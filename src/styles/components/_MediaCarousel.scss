@use '../abstracts/variables' as *;

.carousel {
  position: relative;
  /* make carousel fluid and responsive */
  width: 100%;
  max-width: 489px;
  height: auto; // let height be driven by content (maintain aspect by media)
  margin-inline: auto;
  box-sizing: border-box;
  padding: 8px;
  border: 2px;
  border-style: solid;
  border-radius: 20px;
}

.btn-prev,
.btn-next {
  position: absolute;
  top: 50%;
  width: 56px; /* slightly smaller by default */
  border: 0;
  padding: 2px;
  border-radius: 999px;
  display: grid;
  place-items: center;
  cursor: pointer;
  background: transparent;
  transform: translateY(-50%);
  margin: 10px;
}

.btn-prev {
  left: -20px;
  transform: translate(calc(-100% - var(--nav-outside, 8px)), -50%);
}

.btn-next {
  right: -20px;
  transform: translate(calc(100% + var(--nav-outside, 8px)), -50%);
}

.carousel-number {
  font-family: radhani, sans-serif;
  position: absolute;
  min-width: $media-carousel-min-width;
  top: -17px;
  left: -18px;
  background: black;
  color: white;
  padding: 0px 5px;
  border: 3px solid rgb(255, 255, 255);
  border-radius: 15px;
  line-height: $media-line-height;
  font-size: $media-font-size;
  text-align: center;
}

.media-index {
  position: absolute;
  font-family: radhani, sans-serif;
  padding: 0px 8px;
  /*border-radius: 12px;*/
  font-size: 25px;
  color: black;
}

.media-caption {
  position: absolute;
  width: 100%;
  text-align: center;
  font-size: 16px;
  padding: 10px 0;
}

/* Ensure images and videos scale to container */
.carousel .carousel-frame {
  width: 100%;
  aspect-ratio: 489 / 325; /* preserve original aspect on larger screens */
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
}

.carousel .media {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* Larger touch targets for buttons on mobile */
.btn-prev,
.btn-next {
  min-width: 48px;
  min-height: 48px;
}

/* Responsive adjustments */
@media (max-width: $breakpoint-md) {
  .carousel {
    padding: 6px;
    border-radius: 14px;
  }

  .carousel .carousel-frame {
    aspect-ratio: 16 / 9; /* more friendly for narrow screens */
  }

  .btn-prev {
    left: 6px;
    transform: translate(0, -50%);
  }

  .btn-next {
    right: 6px;
    transform: translate(0, -50%);
  }

  .btn-prev img,
  .btn-next img {
    width: 28px;
    height: 28px;
  }

  .carousel-number {
    top: 6px;
    left: 6px;
    font-size: 18px;
    line-height: 22px;
    border-radius: 10px;
    padding: 2px 6px;
  }

  .media-index {
    top: 6px;
    right: 12px;
    font-size: 18px;
  }

  .media-caption {
    position: static;
    margin-top: 8px;
    font-size: 14px;
    padding: 6px 4px 0 4px;
  }
}

@media (max-width: $breakpoint-sm) {
  .carousel {
    padding: 4px;
    border-radius: 12px;
  }

  .carousel .carousel-frame {
    aspect-ratio: 4 / 3;
  }

  .btn-prev,
  .btn-next {
    min-width: 44px;
    min-height: 44px;
  }

  .btn-prev img,
  .btn-next img {
    width: 22px;
    height: 22px;
  }
}
